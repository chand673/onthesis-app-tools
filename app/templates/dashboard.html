{% extends "layout.html" %}

{% block title %}Dasbor - OnThesis{% endblock %}

{% block content %}
<!-- [DIUBAH] Kanvas untuk animasi bintang -->
<canvas id="star-canvas"></canvas>

<div class="relative z-10 animate-fade-in-up">
    <div class="flex justify-center mb-8">
        <img src="{{ url_for('static', filename='images/logo.png') }}" alt="OnThesis Logo" class="h-24">
    </div>

    <header class="text-center mb-10">
        <h1 class="text-4xl md:text-5xl font-extrabold text-white">Selamat Datang Bor!, {{ current_user.username }}!</h1>
        <p class="text-lg text-gray-400 mt-2 max-w-2xl mx-auto">Semua alat bantu skripsi Lu ada di sini. Pilih fitur Sesuai kebutuhan Lu!.</p>
    </header>

    <!-- [DIUBAH] Grid Kartu dengan struktur bingkai putih dan semua fitur -->
    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-8">
        
        <!-- Kartu: Search References -->
        <a href="{{ url_for('search_references') }}" class="neural-card group accent-blue animate-fade-in-up" style="animation-delay: 300ms;">
            <div class="card-layer-bottom">
                <p>Temukan jutaan jurnal dan artikel ilmiah dari database global untuk memperkuat argumen Anda.</p>
            </div>
            <div class="card-layer-top">
                <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="text-gray-400 group-hover:text-white transition-colors"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
                <h3 class="text-xl font-bold text-white mt-4">Search</h3>
            </div>
        </a>

        <!-- Kartu: Manajemen Sitasi -->
        <a href="{{ url_for('citation_management') }}" class="neural-card group accent-blue animate-fade-in-up" style="animation-delay: 400ms;">
            <div class="card-layer-bottom">
                <p>Kelola semua referensi Anda di satu tempat dan buat daftar pustaka secara otomatis.</p>
            </div>
            <div class="card-layer-top">
                <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="text-gray-400 group-hover:text-white transition-colors"><path d="M4 6h16"/><path d="M4 12h16"/><path d="M4 18h16"/></svg>
                <h3 class="text-xl font-bold text-white mt-4">Sitasi</h3>
            </div>
        </a>

        <!-- Kartu: Parafrase AI -->
        <a href="{{ url_for('paraphrase_ai') }}" class="neural-card group accent-purple animate-fade-in-up" style="animation-delay: 500ms;">
            <div class="card-layer-bottom">
                <p>Ubah tulisan Anda menjadi lebih akademis dan bebas plagiarisme dengan gaya baru.</p>
            </div>
            <div class="card-layer-top">
                <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="text-gray-400 group-hover:text-white transition-colors"><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"/></svg>
                <h3 class="text-xl font-bold text-white mt-4">Parafrase</h3>
            </div>
        </a>

        <!-- Kartu: Curhat AI -->
        <a href="{{ url_for('chat_ai') }}" class="neural-card group accent-purple animate-fade-in-up" style="animation-delay: 600ms;">
            <div class="card-layer-bottom">
                <p>Butuh teman diskusi? Atasi kebuntuan menulis atau kelola stres skripsi Anda.</p>
            </div>
            <div class="card-layer-top">
                <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="text-gray-400 group-hover:text-white transition-colors"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg>
                <h3 class="text-xl font-bold text-white mt-4">Curhat AI</h3>
            </div>
        </a>

        <!-- Kartu: Asisten AI -->
        <a href="{{ url_for('writing_assistant') }}" class="neural-card group accent-purple animate-fade-in-up" style="animation-delay: 700ms;">
            <div class="card-layer-bottom">
                <p>Buat kerangka, hasilkan abstrak, dan sempurnakan draf skripsi Anda.</p>
            </div>
            <div class="card-layer-top">
                <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="text-gray-400 group-hover:text-white transition-colors"><path d="m12 2 3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>
                <h3 class="text-xl font-bold text-white mt-4">Asisten</h3>
            </div>
        </a>

        <!-- Kartu: Analisis Data -->
        <a href="{{ url_for('data_analysis') }}" class="neural-card group accent-purple animate-fade-in-up" style="animation-delay: 800ms;">
            <div class="card-layer-bottom">
                <p>Lakukan uji statistik dengan interpretasi AI yang mudah dipahami.</p>
            </div>
            <div class="card-layer-top">
                <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="text-gray-400 group-hover:text-white transition-colors"><path d="M3 3v18h18"/><path d="m19 9-5 5-4-4-3 3"/></svg>
                <h3 class="text-xl font-bold text-white mt-4">Analisis</h3>
            </div>
        </a>
    </div>
</div>
{% endblock %}

{% block page_scripts %}
<script>
    // [DIUBAH] Skrip untuk animasi bintang di alam semesta
    const canvas = document.getElementById('star-canvas');
    const ctx = canvas.getContext('2d');
    
    let stars = [];
    let numStars = 200;

    function setCanvasSize() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
    }

    class Star {
        constructor(x, y, radius, opacity) {
            this.x = x;
            this.y = y;
            this.radius = radius;
            this.opacity = opacity;
            this.fadingIn = true;
            this.fadeSpeed = Math.random() * 0.015;
        }

        draw() {
            ctx.beginPath();
            ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
            ctx.fillStyle = `rgba(255, 255, 255, ${this.opacity})`;
            ctx.fill();
        }

        update() {
            if (this.fadingIn) {
                this.opacity += this.fadeSpeed;
                if (this.opacity >= 1) {
                    this.fadingIn = false;
                }
            } else {
                this.opacity -= this.fadeSpeed;
                if (this.opacity <= 0) {
                    this.x = Math.random() * canvas.width;
                    this.y = Math.random() * canvas.height;
                    this.fadingIn = true;
                }
            }
            this.draw();
        }
    }

    function initStars() {
        stars = [];
        for (let i = 0; i < numStars; i++) {
            const x = Math.random() * canvas.width;
            const y = Math.random() * canvas.height;
            const radius = Math.random() * 1.5;
            const opacity = Math.random();
            stars.push(new Star(x, y, radius, opacity));
        }
    }

    function animateStars() {
        requestAnimationFrame(animateStars);
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        stars.forEach(star => {
            star.update();
        });
    }

    window.addEventListener('resize', () => {
        setCanvasSize();
        initStars();
    });

    setCanvasSize();
    initStars();
    animateStars();
</script>
{% endblock %}
