<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}OnThesis{% endblock %}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
    <!-- Jika Anda menggunakan theme-nature.css, pastikan linknya ada di sini -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/theme-nature.css') }}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Style untuk submenu di sidebar */
        .sidebar .nav-item .submenu {
            list-style: none;
            padding-left: 20px; /* Indentasi untuk submenu */
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-in-out;
        }

        .sidebar .nav-item.open .submenu {
            max-height: 200px; /* Sesuaikan jika item lebih banyak */
            margin-top: 10px;
        }

        .sidebar .nav-item .submenu li a {
            padding: 8px 15px;
            font-size: 0.9rem;
            display: block;
            border-radius: 6px;
        }

        .sidebar .nav-item .submenu li a.active,
        .sidebar .nav-item .submenu li a:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }
        
        .nav-link.submenu-toggle {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .nav-link.submenu-toggle .arrow {
            transition: transform 0.3s;
        }

        .nav-item.open .nav-link.submenu-toggle .arrow {
            transform: rotate(90deg);
        }
    </style>
</head>
<body>
    <div class="main-container">
        <aside class="sidebar">
            <div class="logo">
                <img src="{{ url_for('static', filename='images/onthesis-logo.png') }}" alt="OnThesis Logo">
            </div>
            <nav>
                <ul class="nav-list">
                    <li class="nav-item">
                        <a href="{{ url_for('dashboard') }}" class="nav-link">Dasbor</a>
                    </li>
                    <li class="nav-item">
                        <a href="{{ url_for('projects') }}" class="nav-link">Manajemen Proyek</a>
                    </li>
                    <li class="nav-item">
                        <a href="{{ url_for('search_references') }}" class="nav-link">Search References</a>
                    </li>
                    <li class="nav-item">
                        <a href="{{ url_for('citation_management') }}" class="nav-link">Manajemen Sitasi</a>
                    </li>
                    <li class="nav-item">
                        <a href="{{ url_for('paraphrase_ai') }}" class="nav-link">Parafrase AI</a>
                    </li>
                    <li class="nav-item">
                        <a href="{{ url_for('chat_ai') }}" class="nav-link">Curhat AI</a>
                    </li>
                    
                    <!-- UPDATED: Asisten AI dengan Submenu -->
                    <li class="nav-item" id="assistant-menu">
                        <a href="#" class="nav-link submenu-toggle">
                            <span>Asisten AI</span>
                            <span class="arrow">&#9656;</span> <!-- Arrow icon -->
                        </a>
                        <ul class="submenu">
                            <li><a href="{{ url_for('outline_generator') }}" class="nav-link">Generator Kerangka</a></li>
                            <li><a href="{{ url_for('abstract_generator') }}" class="nav-link">Generator Abstrak</a></li>
                        </ul>
                    </li>
                    
                    <li class="nav-item">
                        <a href="{{ url_for('data_analysis') }}" class="nav-link">Analisis Data</a>
                    </li>
                </ul>
            </nav>
        </aside>
        <main class="content">
            {% block content %}{% endblock %}
        </main>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', function() {
        // Script untuk toggle submenu
        const assistantMenu = document.getElementById('assistant-menu');
        const assistantToggle = assistantMenu.querySelector('.submenu-toggle');

        assistantToggle.addEventListener('click', function(e) {
            e.preventDefault();
            assistantMenu.classList.toggle('open');
        });

        // Script untuk menandai link sidebar yang aktif
        const currentPath = window.location.pathname;
        const navLinks = document.querySelectorAll('.sidebar .nav-link');

        navLinks.forEach(link => {
            if (link.getAttribute('href') === currentPath) {
                link.classList.add('active');
                
                // Jika link yang aktif ada di dalam submenu, buka submenu-nya
                const parentSubmenu = link.closest('.submenu');
                if (parentSubmenu) {
                    parentSubmenu.closest('.nav-item').classList.add('open');
                }
            }
        });
    });
    </script>
    {% block scripts %}{% endblock %}
</body>
</html>
